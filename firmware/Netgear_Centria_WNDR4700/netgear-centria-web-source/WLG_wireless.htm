<% cfg_set("set_wireless_tag", "0") %>
<% http_header("style/form.css", "/funcs.js", "/wlan.js") %>
<% body_header_alt("_wlan", "WLG_wireless.htm", "wlan") %>
<div class="page_title">$wlan_mark</div>
<div class="fix_button">
<TABLE width=100% border=0 cellpadding=0 cellspacing=2>
<TR>
        <TD nowrap colspan=2 align=center>
	<input class="cancel_bt" type='button' name="Cancel" value='$cancel_mark' onClick='location.href="WLG_wireless.htm";'>&nbsp;&nbsp;
        <input class="apply_bt" type='submit' name="Apply" value='$apply_mark' onclick='return check_wlan();'>
        </TD>
</TR>
</TABLE>
</div>
<div id="main" class="main_top_button"> 
<% table_header() %>

<script>
var netgear_region=top.netgear_region;
var host_name=parent.host_name;
var is_vc_release = parent.is_vc_release;
var wds_support_wpa = top.wds_support_wpa;
var gui_region="<% cfg_get("GUI_Region") %>"
var pr_flag = (( gui_region == "Chinese" && (netgear_region == "" || netgear_region.toUpperCase() == "WW")) || netgear_region.toUpperCase() == "PR") ? 1 : 0
var pr_wds_support_wpa=( wds_support_wpa == 1  && pr_flag == 1) ? 1 : 0;

var wlan_mode_54 = "$wlan_mode_54";
if( parent.mode_is_300 == 1 )
{
	var wlan_mode_130 = "$wlan_mode_130";
	var wlan_mode_300 = "$wlan_mode_300";
	var msg = "<% string_warning("wir_wning", "300","130", "145" ) %>";
}
else{
	var wlan_mode_130 = "$wlan_mode_65";
	var wlan_mode_300 = "$wlan_mode_150";
}

var lanIP = "<% cfg_get("lan_ipaddr") %>";
var lanSubnet = "<% cfg_get("lan_netmask") %>";
var wanIP = "<% wan_ip() %>";
var wanSubnet = "<% wan_netmask() %>";

var str_wpae="";
var str_none="";
var str_wep="";
var str_wpa="";
var str_wpa2="";
var str_wpas="";
var str_none_an="";
var str_wep_an="";
var str_wpa_an="";
var str_wpa2_an="";
var str_wpas_an="";

var StartChannel = new Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,1); 
var FinishChannel = new Array(11,13,13,13,13,13,13,13,11,11,13,13,13); //middle east move up two line
var StartChannelB = new Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,1,1,1,1,1,1,1,1,1,1,1);
var FinishChannelB = new Array(11,13,13,13,11,13,13,13,13,13,13,13,11,13,13,13,13,13,13,13,13,11,11);
//bug 23854:The dialogue of DFS channel is not implemented
var dfs_info="<% cat_file("/proc/sys/dfs_detect/channel_interval") %>";
dfs_info = dfs_info.substring(0, dfs_info.length - 1);//delete the last char '#' 

var an_router_flag = parent.an_router_flag;
var str_have_an="";
var guest_router_flag=parent.guest_router_flag;
var wire_iso_flag=parent.wire_iso_flag;

var video_router_flag = parent.video_router_flag;
var dfs_channel_router_flag = parent.dfs_channel_router_flag;
var dfs_channel2_router_flag = parent.dfs_channel2_router_flag;/* bug 25665: DFS channel supported in canada,Europe and Austrilia */
<% show_wlan_variable() %>

</script>
<input type="hidden" name="hidden_wlan_mode">
<input type="hidden" name="hidden_wlan_channel">
<input type="hidden" name="generate_flag">
<input type="hidden" name="old_length">
<input type="hidden" name="old_length_a">
<input type="hidden" name="wl_sec_wpaphrase_len">
<input type="hidden" name="wla_sec_wpaphrase_len">
<input type="hidden" name="wl_hidden_wpa_psk">
<input type="hidden" name="wla_hidden_wpa_psk">
<input type="hidden" name="hidden_sec_type">
<input type="hidden" name="wep_press_flag">
<input type="hidden" name="wpa1_press_flag" value=0>
<input type="hidden" name="wpa2_press_flag" value=0>
<input type="hidden" name="wpas_press_flag" value=0>
<input type="hidden" name="wla_wpa1_press_flag" value=0>
<input type="hidden" name="wla_wpa2_press_flag" value=0>
<input type="hidden" name="wla_wpas_press_flag" value=0>
<input type="hidden" name="wps_change_flag" value="<% cfg_get("wps_status") %>">
<input type="hidden" name="hidden_enable_guestNet">
<input type="hidden" name="hidden_enable_ssidbro">
<input type="hidden" name="hidden_allow_guest">
<input type="hidden" name="radiusServerIP">
<input type="hidden" name="radiusServerIP_a">
<input type="hidden" name="opmode_bg">
<input type="hidden" name="wl_mode">

<input type="hidden" name="wl_ssid">
<input type="hidden" name="wla_ssid">
<input type="hidden" name="wl_WRegion">
<input type="hidden" name="wla_WRegion">
<input type="hidden" name="wl_hidden_wlan_channel">
<input type="hidden" name="wla_hidden_wlan_channel">
<input type="hidden" name="wl_hidden_wlan_mode">
<input type="hidden" name="wla_hidden_wlan_mode">
<input type="hidden" name="wl_hidden_sec_type">
<input type="hidden" name="wla_hidden_sec_type">

<input type="hidden" name="hidden_WpaeRadiusSecret">
<input type="hidden" name="hidden_WpaeRadiusSecret_a">

<input type="hidden" name="wl_enable_ssid_broadcast">
<input type="hidden" name="wla_enable_ssid_broadcast">
<input type="hidden" name="hidden_enable_video">

<input type="hidden" name="wl_tx_ctrl">
<input type="hidden" name="wla_tx_ctrl">
<input type="hidden" name="wl_endis_wireless_isolation">
<input type="hidden" name="wla_endis_wireless_isolation">

<input type="hidden" name="wl_apply_flag" value="0">
<script>
if(an_router_flag == 1)
{
	document.write('<TR><TD nowrap colspan=2><A tabindex=-1 href="javascript:loadhelp(\'_wlan\',\'network\')"><B>$wlg_region_select</B></A></TD></TR>');
	document.write('<TR> <TD nowrap width=35%>$wlan_mark_reg:</TD><TD nowrap>');
		document.write('<select name="WRegion" size="1" onchange="chgChA(1);setBChannel();" <% cfg_get("region_flag") %>>');
		document.write('<option value=0>$coun_af</option>');
		document.write('<option value=1>$coun_as</option>');
		document.write('<option value=2>$coun_au</option>');
		document.write('<option value=3>$coun_ca</option>');
		document.write('<option value=11>$coun_ch</option>');
		document.write('<option value=4>$coun_eu</option>');
		document.write('<option value=12>$coun_in</option>');
		document.write('<option value=5>$coun_is</option>');
		document.write('<option value=6>$coun_jp</option>');
		document.write('<option value=7>$coun_ko</option>');
		document.write('<option value=13>$coun_ma</option>');
		document.write('<option value=8>$coun_mx</option>');
		document.write('<option value=14>$coun_md_1</option>');
		document.write('<option value=15>$coun_md_2</option>');
		document.write('<option value=16>$coun_md_3</option>');
		document.write('<option value=17>$coun_md_4</option>');
		document.write('<option value=18>$coun_md_5</option>');
		document.write('<option value=19>$coun_ru</option>');
		document.write('<option value=20>$coun_si</option>');
		document.write('<option value=9>$coun_sa</option>');
		document.write('<option value=21>$coun_ta</option>');
	if(netgear_region.toUpperCase() == "NA")
		document.write('<option value=10>$coun_na</option>');
	else
		document.write('<option value=10>$coun_us</option>');

		document.write('</select></TD></TR>');
	document.getElementsByName("WRegion")[0].value = wl_get_countryA;
}
</script>
<TR> 
	<TD nowrap colspan=2><A tabindex=-1 href="javascript:loadhelp('_wlan','network')"><B>$wlan_network_mark<script> if( an_router_flag == 1) document.write("(2.4GHz b/g/n)")</script></B></A></TD>
</TR>
<TR id=ssid_bc_bgn>
	<TD nowrap>
	<input type="checkbox" name="ssid_bc" value="1">$adva_wlan_ssid_broadcast
	</TD>
</TR>
<TR id=guestiso>
	<TD nowrap>
	<input type="checkbox" name="enable_isolation" value="1">$guest_wire_iso
	</TD>
</TR>
<TR> 
	<TD nowrap width=35%>$wlan_mark_ssid:</TD>
	<TD nowrap><input type="text" id="ESSID" name="ssid" value="<% cfg_sed_ssid_value("wl_ssid") %>" size="20" maxlength="32"></TD>
</TR>
<tr style="display:none">
	<td><input type="text" name="wla1ssid" value="<% cfg_sed_ssid_value("wla1_ssid") %>" size="20" maxlength="32"></td>
	<td><input type="text" name="wlg1ssid" value="<% cfg_sed_ssid_value("wlg1_ssid") %>" size="20" maxlength="32"></td>
</tr>
<script>
if(an_router_flag == 0)
{
	document.write('<TR> <TD nowrap width=35%>$wlan_mark_reg:</TD><TD nowrap>');
	if(netgear_region.toUpperCase() == "NA" || netgear_region.toUpperCase() == "JP")
		document.write('<select name="WRegion" size="1" onchange="setChannel();" <% cfg_get("region_flag") %>>');
	else
		document.write('<select name="WRegion" size="1" onchange="setChannel();">');
		document.write('<option value=0>$coun_af</option>');
		document.write('<option value=1>$coun_as</option>');
		document.write('<option value=2>$coun_au</option>');
		document.write('<option value=4>$coun_eu</option>');
		document.write('<option value=5>$coun_is</option>');
		document.write('<option value=6>$coun_jp</option>');
		document.write('<option value=7>$coun_ko</option>');
		document.write('<option value=10>$coun_na</option>');
		document.write('<option value=8>$coun_mx</option>');
		document.write('<option value=22>$coun_middle_east</option>');
		document.write('<option value=19>$coun_ru</option>');
		document.write('<option value=9>$coun_sa</option>');

	document.write('</select></TD></TR>');
	document.getElementsByName("WRegion")[0].value = wl_get_countryA;
}
</script>
<TR> 
	<TD nowrap width=35%>$wlan_mark_chan:</TD>
	<TD nowrap>
	<select name="w_channel" size="1">
		<option id="auto" selected>$auto_mark</option>
		<option>01</option>
		<option>02</option>
		<option>03</option>
		<option>04</option>
		<option>05</option>
		<option>06</option>
		<option>07</option>
		<option>08</option>
		<option>09</option>
		<option>10</option>
		<option>11</option>
		<option>12</option>
		<option>13</option>
		<option>14</option>
	</select>
	</TD>
</TR>
<script>
	if(old_wds_endis_fun == "1")
	{
		document.getElementById("auto").disabled = true;
	}
</script>
<TR> 
	<TD nowrap width=35%>$wlan_mark_mode:</TD>
	<TD nowrap id="opmode_all">
	<select name="opmode" size="1" onchange="wl_sectype_change()">
		<option value="1"><script>document.write(wlan_mode_54); if( is_vc_release == 1 ) document.write(' b/g only');</script></option>
		<option value="2"><script>document.write(wlan_mode_130); if( is_vc_release == 1 ) document.write(' b/g/n mixed mode (neighbor friendly)');</script></option>
		<option value="3"><script>document.write(wlan_mode_300); if( is_vc_release == 1 ) document.write(' b/g/n mixed mode');</script></option>
<script>
	if( is_vc_release == 1 )
	{
		document.write('<option value="4">'+wlan_mode_300+' g/n only</option>');
		document.write('<option value="5">'+wlan_mode_300+' n only</option>');	
	}
</script>		
        </select>
	</TD>
	<TD nowrap id="opmode_54" style="display:none">
	<select name="opmode54" size="1" onchange="wl_54_sectype_change()">
		<option value="1"><script>document.write(wlan_mode_54); if( is_vc_release == 1 ) document.write(' b/g only');</script></option>		
    </select>
	</TD>
</TR>
$bluebar
</TABLE>

<TABLE width=100% border=0 cellpadding=0 cellspacing=2>
<TR>
	<TD nowrap colspan=2><A tabindex=-1 href="javascript:loadhelp('_wlan','security')"><B>$sec_type</B></A></TD>
</TR>
<TR>
	<TD nowrap colspan=2>
	<input type="radio" name="security_type" value="Disable" onClick=setSecurity(1) AccessKey="N">$sec_off
	<TD>
</TR>
<TR id="wep_54">
	<TD nowrap colspan=2>
	<input type="radio" name="security_type" value="WEP" onClick=setSecurity(2)>$sec_wep
	</TD>
</TR>
<TR id="wpa_psk_54">
	<TD nowrap colspan=2>
	<input type="radio" name="security_type" value="WPA-PSK" onClick=setSecurity(3)>$sec_wpa
	</TD>
</TR>
<TR>
	<TD nowrap colspan=2>
	<input type="radio" name="security_type" value="WPA2-PSK" onClick=setSecurity(4)>$sec_wpa2
	</TD>
</TR>
<TR>
	<TD nowrap colspan=2>
	<input type="radio" name="security_type" value="AUTO-PSK" onClick=setSecurity(5)>$sec_wpas
	</TD>
</TR>
<TR>
	<TD nowrap colspan=2>
	<input type="radio" name="security_type" value="WPA-ENTER" onClick=setSecurity(6)>$sec_wpa_enterprise
	</TD>
</TR>
</TABLE>

<div id=view></div>

<div align="center" ID="none" style="position:absolute;top:0;left:0;visibility:hidden">
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	<TR>
		<TD nowrap colspan=2></TD>
	</TR>
	</TABLE>
</div>   

<div align="center" ID="wep" style="position:absolute;top:0;left:0;visibility:hidden">
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wep')"><B>$sec_enc_head</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap>$sec_auth</TD>
		<TD nowrap>
			<select NAME="authAlgm" size="1">
				<option value=1 <% select_check("wl_auth", "1") %> >$sec_share</option>
				<option value=2 <% select_check("wl_auth", "2") %> >$sec_auto</option>
			</select>
		</TD>
	</TR>
	<TR>
		<TD nowrap>$sec_enc</TD>
		<TD nowrap> 
			<select NAME="wepenc" size="1" onChange="changekeylen(document.forms[0]);">
				<option value=5  <% select_check("wl_key_length", "5") %> >$sec_64</option>
				<option value=13 <% select_check("wl_key_length", "13") %> >$sec_128</option>
			</select>
		</TD>
	</TR>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wepkey')"><B>$sec_key</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap colspan=2>&nbsp;$sec_phr :&nbsp;
			<input type="text" size="16" maxlength="32" NAME="passphraseStr" VALUE="<% cfg_sed_xss("wl_passphraseStr"); %>">&nbsp;&nbsp;
			<input class="short_common_bt" type="button" name="Generate" VALUE="$generate_mark" OnClick="clickgenerate(document.forms[0])">
		</TD>
	</TR>
	<TR>
		<TD nowrap colspan=2>
		<TABLE>
		<TR>
			<TD nowrap>$sec_key1
			<input type=radio NAME="wep_key_no" checked value="1">
			</TD>
			<TD nowrap>
			<input TYPE="TEXT" SIZE="document.forms[0].wepenc.value*2+2" MAXLENGTH="32" NAME="KEY1" VALUE="" OnFocus="this.maxLength=document.forms[0].wepenc.value*2;this.size=document.forms[0].wepenc.value*2+2;" onKeyPress="return getkey('wep', event)">
			</TD>
		</TR>
		<TR>
			<TD nowrap>$sec_key2
			<input type=radio NAME="wep_key_no" value="2">
			</TD>
			<TD nowrap>
			<input TYPE="TEXT" SIZE="document.forms[0].wepenc.value*2+2" MAXLENGTH="32" NAME="KEY2" VALUE="" OnFocus="this.maxLength=document.forms[0].wepenc.value*2;this.size=document.forms[0].wepenc.value*2+2;" onKeyPress="return getkey('wep', event)">
			</TD>
		</TR>
		<TR>
			<TD nowrap>$sec_key3
			<input type=radio NAME="wep_key_no" value="3">
			</TD>
			<TD nowrap><input TYPE="TEXT" SIZE="document.forms[0].wepenc.value*2+2" MAXLENGTH="32" NAME="KEY3" VALUE="" OnFocus="this.maxLength=document.forms[0].wepenc.value*2;this.size=document.forms[0].wepenc.value*2+2;" onKeyPress="return getkey('wep', event)">
			</TD>
		</TR>
		<TR>
			<TD nowrap>$sec_key4
			<input type=radio NAME="wep_key_no" value="4">
			</TD>
			<TD nowrap>
			<input TYPE="TEXT" SIZE="document.forms[0].wepenc.value*2+2" MAXLENGTH="32" NAME="KEY4" VALUE=""  OnFocus="this.maxLength=document.forms[0].wepenc.value*2;this.size=document.forms[0].wepenc.value*2+2;" onKeyPress="return getkey('wep', event)">
			</TD>
		</TR>
		</TABLE>
		</TD>
	</TR>
	</TABLE>
</div>

<div align="center" ID="wpa" style="position:absolute;top:0;left:0;visibility:hidden">
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wpa-psk')"><B>$sec_type (WPA-PSK)</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap>$sec_phr :</TD>
		<TD nowrap>
		<input type="text" id="textWpaPwdPhrase" size="20" maxlength="64" name="passphrase" value="<% cfg_sed_passphrase("wl_wpa1_psk") %>" onFocus="document.forms[0].wpa1_press_flag.value=1" onKeyPress="document.forms[0].wpa1_press_flag.value=1">
		<span class="optiondesc" id="wpaPwdPhrExtText">$sec_863_or_64h</span>
		</TD>
	</TR>
	</TABLE>
</div>
 
<div align="center" ID="wpa2" style="position:absolute;top:0;left:0;visibility:hidden">  
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wpa2-psk')"><B>$sec_type (WPA2-PSK)</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap>
		<span class="optiondesc" id="wpaPwdPhraseText">$sec_phr :</span>
		</TD>
		<TD nowrap>
		<input type="text" id="textWpaPwdPhrase" maxlength="64" size="20" name="passphrase" value="<% cfg_sed_passphrase("wl_wpa2_psk") %>" onFocus="document.forms[0].wpa2_press_flag.value=1" onKeyPress="document.forms[0].wpa2_press_flag.value=1">
		<span class="optiondesc" id="wpaPwdPhrExtText">$sec_863_or_64h</span>
		</TD>
	</TR>
	</TABLE>
</div>

<div align="center" ID="wpas" style="position:absolute;top:0;left:0;visibility:hidden">
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wpa-psk+wpa2-psk')"><B>$sec_type (WPA-PSK + WPA2-PSK)</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap>
		<span class="optiondesc" id="wpaPwdPhraseText">$sec_phr :</span>
		</TD>
		<TD nowrap>
		<input type="text" id="textWpaPwdPhrase" size="20" maxlength="64" name="passphrase" value="<% cfg_sed_passphrase("wl_wpas_psk") %>" onFocus="document.forms[0].wpas_press_flag.value=1" onKeyPress="document.forms[0].wpas_press_flag.value=1">
		<span class="optiondesc" id="wpaPwdPhrExtText">$sec_863_or_64h</span>
		</TD>	  
	</TR>
	</TABLE>
</div>

<div align="center" ID="wpae" style="position:absolute;top:0;left:0;visibility:hidden">
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wpawpa2')"><B>$sec_type ( $sec_wpa_enterprise )</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap>$sec_wpa_mode</TD>
		<TD>
		<select name="wpae_mode" size='1' onchange="wpaemode()">
			<option value='WPAE-TKIP'>WPA [TKIP]</option>
			<option value='WPAE-AES'>WPA2 [AES]</option>
			<option value='WPAE-TKIPAES'>WPA [TKIP] + WPA2 [AES]</option>
		</select>
		</TD>
	</TR>
	<TR>
		<TD nowrap>$radius_serverIP</TD>
        <TD nowrap>
        <input type="text" size="3" autocomplete="off" maxlength="3" name="radiusIPAddr1" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">.
        <input type="text" size="3" autocomplete="off" maxlength="3" name="radiusIPAddr2" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">.
        <input type="text" size="3" autocomplete="off" maxlength="3" name="radiusIPAddr3" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">.
        <input type="text" size="3" autocomplete="off" maxlength="3" name="radiusIPAddr4" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">
        </TD>  
	</TR>
	<TR>
		<TD nowrap>$radius_serverPort</TD>	
		<TD nowrap><input type="text" id="textWpaeRadiusPort" size="20" maxlength="5" name="textWpaeRadiusPort" value="1812" onKeyPress="return getkey('num',event);"></TD>	
	</TR>	
	<TR>
		<TD nowrap>$radius_serverSecret</TD>	
		<TD nowrap><input type="text" id="textWpaeRadiusSecret" size="20" maxlength="128" value="<% cfg_sed_ssid_value("wl_radiusSecret") %>" name="textWpaeRadiusSecret" onKeyPress="return getkey('ssid', event)"></TD>	
	</TR>	
	</TABLE>
</div>

<!--the following message is for a/n -->
<div id="have_an"></div>
<div align="center" ID="hidden_an" style="position:absolute;top:0;left:0;visibility:hidden">
<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
$bluebar
<TR> 
	<TD nowrap colspan=2><A tabindex=-1 href="javascript:loadhelp('_wlan','network')"><B>$wlan_network_mark (5GHz a/n) </B></A></TD>
</TR>
<TR id=ssid_bc_an>
	<TD nowrap>
	<input type="checkbox" name="ssid_bc_an" value="1">$adva_wlan_ssid_broadcast
	</TD>
</TR>
<TR id=guestiso_an>
	<TD nowrap>
	<input type="checkbox" name="enable_isolation_an" value="1">$guest_wire_iso
	</TD>
</TR>
<TR id=video>
	<TD nowrap colspan=2><input type=checkbox name="enable_video" value='1'>
	<A tabindex=-1>$enable_video_network</A>
	</TD>
</TR>
<TR> 
	<TD nowrap width=35%>$wlan_mark_ssid:</TD>
	<TD nowrap><input type="text" id="ESSID" name="ssid_an" value="<% cfg_sed_ssid_value("wla_ssid") %>" size="20" maxlength="32"></TD>
</TR>
<TR> 
	<TD nowrap width=35%>$wlan_mark_chan:</TD>
	<TD nowrap>
	<select name="w_channel_an" id="select_channel_an" size="1">
<script>
if(dfs_channel_router_flag == 1 )
	document.write("<option selected value=0>Auto</option> ");
</script>
		<option value=36>36</option>
		<option value=40>40</option>
		<option value=44>44</option>
		<option value=48>48</option>
		<option value=149>149</option>
		<option value=153>153</option>
		<option value=157>157</option>
		<option value=161>161</option>
		<option value=165>165</option>
	</select>
	</TD>
</TR>
<TR> 
	<TD nowrap width=35%>$wlan_mark_mode:</TD>
	<TD nowrap id="opmode_an_all">
	<select name="opmode_an" size="1" onchange="chgChA(2);wla_sectype_change();">
		<option value="1"><script>document.write(wlan_mode_54)</script><option>
		<option value="2"><script>document.write(wlan_mode_130)</script></option>
		<option value="3"><script>document.write(wlan_mode_300)</script></option>
        </select>
	</TD>
		<TD nowrap id="opmode_an_54">
	<select name="opmode_an54" size="1" onchange="chgChA(2);wla_54_sectype_change();">
		<option value="1"><script>document.write(wlan_mode_54)</script></option>
    </select>
	</TD>
</TR>

$bluebar
</table>

<TABLE width=100% border=0 cellpadding=0 cellspacing=2>
<TR>
	<TD nowrap colspan=2><A tabindex=-1 href="javascript:loadhelp('_wlan','security')"><B>$sec_type</B></A></TD>
</TR>
<TR>
	<TD nowrap colspan=2>
	<input type="radio" name="security_type_an" value="Disable" onClick=setSecurity_an(1) AccessKey="N">$sec_off
	<TD>
</TR>
<TR id="wep_an_54">
	<TD nowrap colspan=2>
	<input type="radio" name="security_type_an" value="WEP" onClick=setSecurity_an(2)>$sec_wep
	</TD>
</TR>
<TR id="wpa_psk_an_54">
	<TD nowrap colspan=2>
	<input type="radio" name="security_type_an" value="WPA-PSK" onClick=setSecurity_an(3)>$sec_wpa
	</TD>
</TR>
<TR>
	<TD nowrap colspan=2>
	<input type="radio" name="security_type_an" value="WPA2-PSK" onClick=setSecurity_an(4)>$sec_wpa2
	</TD>
</TR>
<TR>
	<TD nowrap colspan=2>
	<input type="radio" name="security_type_an" value="AUTO-PSK" onClick=setSecurity_an(5)>$sec_wpas
	</TD>
</TR>
<TR>
	<TD nowrap colspan=2>
	<input type="radio" name="security_type_an" value="WPA-ENTER" onClick=setSecurity_an(6)>$sec_wpa_enterprise
	</TD>
</TR>
</TABLE>

<div id=view_a></div>

<div align="center" ID="none_an" style="position:absolute;top:0;left:0;visibility:hidden">
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	<TR>
		<TD nowrap colspan=2></TD>
	</TR>
	</TABLE>
</div>   

<div align="center" ID="wep_an" style="position:absolute;top:0;left:0;visibility:hidden">
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wep')"><B>$sec_enc_head</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap>$sec_auth</TD>
		<TD nowrap>
			<select NAME="authAlgm_an" size="1"><!--bug 21943:change authAlgm_a to authAlgm_an,other changes is same as this -->
				<option value=1 <% select_check("wla_auth", "1") %> >$sec_share</option>
				<option value=2 <% select_check("wla_auth", "2") %> >$sec_auto</option>
			</select>
		</TD>
	</TR>
	<TR>
		<TD nowrap>$sec_enc</TD>
		<TD nowrap> 
			<select NAME="Wepenc_an" size="1" onChange="changekeylen_a(document.forms[0]);">
				<option value=5  <% select_check("wla_key_length", "5") %> >$sec_64</option>
				<option value=13 <% select_check("wla_key_length", "13") %> >$sec_128</option>
			</select>
		</TD>
	</TR>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wepkey')"><B>$sec_key</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap colspan=2>&nbsp;$sec_phr :&nbsp;
			<input type="text" size="16" maxlength="32" NAME="passphraseStr_an" VALUE="<% cfg_sed_xss("wla_passphraseStr"); %>">&nbsp;&nbsp;
			<input class="short_common_bt" type="button" name="Generate_an" VALUE="$generate_mark" OnClick="clickgenerate_a(document.forms[0])">
		</TD>
	</TR>
	<TR>
		<TD nowrap colspan=2>
		<TABLE>
		<TR>
			<TD nowrap>$sec_key1
			<input type=radio NAME="wep_key_no_an" checked value="1">
			</TD>
			<TD nowrap>
			<input TYPE="TEXT" SIZE="document.forms[0].Wepenc_an.value*2+2" MAXLENGTH="32" NAME="KEY1_an" VALUE="" OnFocus="this.maxLength=document.forms[0].Wepenc_an.value*2;this.size=document.forms[0].Wepenc_an.value*2+2;" onKeyPress="return getkey('wep', event)">
			</TD>
		</TR>
		<TR>
			<TD nowrap>$sec_key2
			<input type=radio NAME="wep_key_no_an" value="2">
			</TD>
			<TD nowrap>
			<input TYPE="TEXT" SIZE="document.forms[0].Wepenc_an.value*2+2" MAXLENGTH="32" NAME="KEY2_an" VALUE="" OnFocus="this.maxLength=document.forms[0].Wepenc_an.value*2;this.size=document.forms[0].Wepenc_an.value*2+2;" onKeyPress="return getkey('wep', event)">
			</TD>
		</TR>
		<TR>
			<TD nowrap>$sec_key3
			<input type=radio NAME="wep_key_no_an" value="3">
			</TD>
			<TD nowrap><input TYPE="TEXT" SIZE="document.forms[0].Wepenc_an.value*2+2" MAXLENGTH="32" NAME="KEY3_an" VALUE="" OnFocus="this.maxLength=document.forms[0].Wepenc_an.value*2;this.size=document.forms[0].Wepenc_an.value*2+2;" onKeyPress="return getkey('wep', event)">
			</TD>
		</TR>
		<TR>
			<TD nowrap>$sec_key4
			<input type=radio NAME="wep_key_no_an" value="4">
			</TD>
			<TD nowrap>
			<input TYPE="TEXT" SIZE="document.forms[0].wepenc.value*2+2" MAXLENGTH="32" NAME="KEY4_an" VALUE=""  OnFocus="this.maxLength=document.forms[0].Wepenc_an.value*2;this.size=document.forms[0].Wepenc_an.value*2+2;" onKeyPress="return getkey('wep', event)">
			</TD>
		</TR>
		</TABLE>
		</TD>
	</TR>
	</TABLE>
</div>

<div align="center" ID="wpa_an" style="position:absolute;top:0;left:0;visibility:hidden">
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wpa-psk')"><B>$sec_type (WPA-PSK)</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap>$sec_phr :</TD>
		<TD nowrap>
		<input type="text" id="textWpaPwdPhrase" size="20" maxlength="64" name="passphrase_an" value="<% cfg_sed_passphrase("wla_wpa1_psk") %>" onFocus="document.forms[0].wla_wpa1_press_flag.value=1" onKeyPress="document.forms[0].wla_wpa1_press_flag.value=1">
		<span class="optiondesc" id="wpaPwdPhrExtText">$sec_863_or_64h</span>
		</TD>
	</TR>
	</TABLE>
</div>
 
<div align="center" ID="wpa2_an" style="position:absolute;top:0;left:0;visibility:hidden">  
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wpa2-psk')"><B>$sec_type (WPA2-PSK)</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap>
		<span class="optiondesc" id="wpaPwdPhraseText">$sec_phr :</span>
		</TD>
		<TD nowrap>
		<input type="text" id="textWpaPwdPhrase" maxlength="64" size="20" name="passphrase_an" value="<% cfg_sed_passphrase("wla_wpa2_psk") %>" onFocus="document.forms[0].wla_wpa2_press_flag.value=1" onKeyPress="document.forms[0].wla_wpa2_press_flag.value=1">
		<span class="optiondesc" id="wpaPwdPhrExtText">$sec_863_or_64h</span>
		</TD>
	</TR>
	</TABLE>
</div>

<div align="center" ID="wpas_an" style="position:absolute;top:0;left:0;visibility:hidden">
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wpa-psk+wpa2-psk')"><B>$sec_type (WPA-PSK + WPA2-PSK)</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap>
		<span class="optiondesc" id="wpaPwdPhraseText">$sec_phr :</span>
		</TD>
		<TD nowrap>
		<input type="text" id="textWpaPwdPhrase" size="20" maxlength="64" name="passphrase_an" value="<% cfg_sed_passphrase("wla_wpas_psk") %>" onFocus="document.forms[0].wla_wpas_press_flag.value=1" onKeyPress="document.forms[0].wla_wpas_press_flag.value=1">
		<span class="optiondesc" id="wpaPwdPhrExtText">$sec_863_or_64h</span>
		</TD>	  
	</TR>
	</TABLE>
</div>

<div align="center" ID="wpae_an" style="position:absolute;top:0;left:0;visibility:hidden">
	<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
	$bluebar
	<TR>
		<TD nowrap colspan=2>
		<A tabindex=-1 href="javascript:loadhelp('_wlan','wpawpa2')"><B>$sec_type ( $sec_wpa_enterprise )</B></A>
		</TD>
	</TR>
	<TR>
		<TD nowrap>$sec_wpa_mode</TD>
		<TD>
		<select name="wpae_mode_an" size='1' onchange="wpaemode_an()">
			<option value='WPAE-TKIP'>WPA [TKIP]</option>
			<option value='WPAE-AES'>WPA2 [AES]</option>
			<option value='WPAE-TKIPAES'>WPA [TKIP] + WPA2 [AES]</option>
		</select>
		</TD>
	</TR>
	<TR>
		<TD nowrap>$radius_serverIP</TD>
        <TD nowrap>
        <input type="text" size="3" autocomplete="off" maxlength="3" name="radiusIPAddr1_an" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">.
        <input type="text" size="3" autocomplete="off" maxlength="3" name="radiusIPAddr2_an" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">.
        <input type="text" size="3" autocomplete="off" maxlength="3" name="radiusIPAddr3_an" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">.
        <input type="text" size="3" autocomplete="off" maxlength="3" name="radiusIPAddr4_an" onFocus="this.select();" onkeydown="keydown(event,this);" onKeyPress="return getkey('num',event);" onkeyup="keyup(event,this);">
        </TD>  
	</TR>
	<TR>
		<TD nowrap>$radius_serverPort</TD>	
		<TD nowrap><input type="text" id="textWpaeRadiusPort_an" size="20" maxlength="5" name="textWpaeRadiusPort_an" value="1812" onKeyPress="return getkey('num',event);"></TD>	
	</TR>	
	<TR>
		<TD nowrap>$radius_serverSecret</TD>	
		<TD nowrap><input type="text" id="textWpaeRadiusSecret_an" size="20" maxlength="128" value="<% cfg_sed_ssid_value("wla_radiusSecret") %>" name="textWpaeRadiusSecret_an" onKeyPress="return getkey('ssid', event)"></TD>	
	</TR>	
	</TABLE>
</div>
</div>

<TABLE cellspacing=5 cellPadding=0 width=100% border=0>
$bluebar
</TABLE>

</div> <!-- main -->
<% help_box("0","_wlan") %>
</FORM>
<script>
function change_web_format()
{
	if( guest_router_flag == 1 && wire_iso_flag == 1)
        document.getElementById("guestiso").style.display="";
    else
        document.getElementById("guestiso").style.display="none";
	if( guest_router_flag == 1 && wire_iso_flag == 1 && an_router_flag ==1)
        document.getElementById("guestiso_an").style.display="";
    else
        document.getElementById("guestiso_an").style.display="none";
	if(video_router_flag == 1)
		document.getElementById("ssid_bc_bgn").style.display="";
	else
		document.getElementById("ssid_bc_bgn").style.display="none";
	if(an_router_flag ==1 && video_router_flag == 1 )
	{
			document.getElementById("ssid_bc_an").style.display="";
			document.getElementById("video").style.display="";
	}
	else{
			document.getElementById("ssid_bc_an").style.display="none";
			document.getElementById("video").style.display="none";
	}
}

function loadvalue()
{
	top.enabled_wds=<% wds_enable() %>;
	top.enabled_wps=<% wps_menu() %>;
	/* bug23114: after set wireless, the wps button in menu maybe need change to grey, so , refresh the menu color */
	if( top.location.href.indexOf("adv_index.htm") != -1 )
		top.menu_color_change('wireless');
	else
		top.basic_menu_color_change('wireless');

	var form=document.forms[0];
	
	change_web_format();	
	
	var channel=wl_get_channel;
	var mode="<% cfg_get("wl_simple_mode") %>";
	var opmode_bg="<% cfg_get("opmode_bg"); %>"
	if ( mode >= 3 )
		mode=3;

	if( mode == '1')
		form.opmode.options[0].selected = true;
	else if( mode == '2')
		form.opmode.options[1].selected = true;
	else
		form.opmode.options[2].selected = true;	
	
	if( is_vc_release == 1 )
	{
		if( "<% cfg_get("wl_pureg") %>" == "1" )
			form.opmode.options[3].selected = true;
		if( "<% cfg_get("wl_puren") %>" == "1" )
			form.opmode.options[4].selected = true;
	}

        if(old_endis_wireless_isolation=='1')
			form.enable_isolation.checked = true;
		else
			form.enable_isolation.checked = false;
		if(old_endis_ssid_broadcast=='1')
                form.ssid_bc.checked = true;
        else
                form.ssid_bc.checked = false;

	if(an_router_flag == 1)
		setBChannel();
	else
		setChannel();

	form.w_channel.value = channel;
	if(form.w_channel.selectedIndex == -1)
		form.w_channel.options[0].selected = true;
		
	str_none=getObj("none").innerHTML;
	str_wep=getObj("wep").innerHTML;
	str_wpa=getObj("wpa").innerHTML;
	str_wpa2=getObj("wpa2").innerHTML;
	str_wpas=getObj("wpas").innerHTML;
	str_wpae=getObj("wpae").innerHTML;		
	getObj("none").innerHTML='';	
	getObj("wep").innerHTML='';	
	getObj("wpa").innerHTML='';	
	getObj("wpa2").innerHTML='';	
	getObj("wpas").innerHTML='';	
	getObj("wpae").innerHTML='';	
	
	setSecurity(wl_sectype);
	var sectype=wl_sectype;	
	if ( wds_endis_fun == '0' || endis_wl_radio == '0' || pr_wds_support_wpa == 1)
		setDisabled(false,form.security_type[2],form.security_type[3],form.security_type[4]);
	else
		setDisabled(true,form.security_type[2],form.security_type[3],form.security_type[4]);

	if ( wds_endis_fun == '0' || endis_wl_radio == '0' )
		setDisabled(false,form.security_type[5]);
	else
		setDisabled(true,form.security_type[5]);

	//Bug 19665, should not be both set to wep in main network and guest network.
	var wl_guest_enable="<% cfg_get("wlg1_endis_guestNet") %>";
	var wl_guest_sectype="<% cfg_get("wlg1_sectype") %>";	
	if(wl_guest_enable==1 && wl_guest_sectype==2)
		form.security_type[1].disabled = true;
	
	form.security_type[parseInt(sectype)-1].checked=true;

	if(wl_sectype == '2')
	{
		var form=document.forms[0];
		var keyno=wl_get_keyno;
		var keylength=wl_get_keylength;
		changekeylen(document.forms[0]);
		form.wep_key_no[eval(keyno)-1].checked = true;
		form.KEY1.value=wl_key1;
		form.KEY2.value=wl_key2;
		form.KEY3.value=wl_key3;
		form.KEY4.value=wl_key4;
		form.old_length.value=keylength;
	}
	else if(wl_sectype==6)
	{
		form.wpae_mode.value = get_wpae_mode;
		if( get_radiusSerIp != "" && get_radiusSerIp != "0.0.0.0" )
		{
			radiusIPArray = get_radiusSerIp.split(".");
			form.radiusIPAddr1.value = radiusIPArray[0];
			form.radiusIPAddr2.value = radiusIPArray[1];
			form.radiusIPAddr3.value = radiusIPArray[2];
			form.radiusIPAddr4.value = radiusIPArray[3];
		}
		form.textWpaeRadiusPort.value = get_radiusPort;
	}		


	
	if(an_router_flag == 1){	
		str_have_an=getObj("hidden_an").innerHTML;
		getObj("hidden_an").innerHTML='';
		getObj("have_an").innerHTML=str_have_an;

		var channel_a=wla_get_channel;
		var mode_an="<% cfg_get("wla_simple_mode") %>";
	
		if( mode_an == '1')
			form.opmode_an.options[0].selected = true;
		else if( mode_an == '2')
			form.opmode_an.options[1].selected = true;
		else
			form.opmode_an.options[2].selected = true;
		
	        if(old_wla_endis_ssid_broadcast=='1')
        	        form.ssid_bc_an.checked = true;
       	 	else
                	form.ssid_bc_an.checked = false;
		if(old_wla_endis_wireless_isolation=='1')
        	form.enable_isolation_an.checked = true;
       	else
            form.enable_isolation_an.checked = false;
		if( get_enable_video_value == 1 )
			form.enable_video.checked = true;
		else
			form.enable_video.checked = false;
		
		setAwlan_mode();
		setAChannel(form.w_channel_an);		

		//fix bug 29087:5Ghz channel show blank on IE
		form.w_channel_an.value = channel_a;
		if(form.w_channel_an.selectedIndex == -1)
			form.w_channel_an.options[0].selected = true;

		str_none_an=getObj("none_an").innerHTML;
		str_wep_an=getObj("wep_an").innerHTML;
		str_wpa_an=getObj("wpa_an").innerHTML;
		str_wpa2_an=getObj("wpa2_an").innerHTML;
		str_wpas_an=getObj("wpas_an").innerHTML;
		str_wpae_an=getObj("wpae_an").innerHTML;			
		getObj("none_an").innerHTML='';	
		getObj("wep_an").innerHTML='';	
		getObj("wpa_an").innerHTML='';	
		getObj("wpa2_an").innerHTML='';	
		getObj("wpas_an").innerHTML='';	
		getObj("wpae_an").innerHTML='';		

		setSecurity_an(wla_sectype);

		var sectype_a=wla_sectype;
		if ( wla_wds_endis_fun == '0' || endis_wla_radio == '0' ||pr_wds_support_wpa == 1 )
			setDisabled(false,form.security_type_an[2],form.security_type_an[3],form.security_type_an[4]);	
		else
			setDisabled(true,form.security_type_an[2],form.security_type_an[3],form.security_type_an[4]);
	
		if ( wla_wds_endis_fun == '0' || endis_wla_radio == '0')
			setDisabled(false,form.security_type_an[5]);
		else
			setDisabled(true,form.security_type_an[5]);

		//Bug 19665, should not be both set to wep in main network and guest network.
		var wl_guest_enable_an="<% cfg_get("wla1_endis_guestNet") %>";
		var wl_guest_sectype_an="<% cfg_get("wla1_sectype") %>";
		if(wl_guest_enable_an==1 && wl_guest_sectype_an==2)
			form.security_type_an[1].disabled = true;

		form.security_type_an[parseInt(sectype_a)-1].checked=true;
	
		if(wla_sectype == '2')
		{
			var form=document.forms[0];
			var keyno=wla_get_keyno;
			var keylength=wla_get_keylength;
			changekeylen_a(document.forms[0]);
			form.wep_key_no_an[eval(keyno)-1].checked = true;
			form.KEY1_an.value=wla_key1;
			form.KEY2_an.value=wla_key2;
			form.KEY3_an.value=wla_key3;
			form.KEY4_an.value=wla_key4;
			form.old_length_a.value=keylength;
		}
		else if(wla_sectype==6)
		{
			form.wpae_mode_an.value = get_wpae_mode_a;
			if( get_radiusSerIp_a != "" && get_radiusSerIp_a != "0.0.0.0" )
			{
				radiusIPArray = get_radiusSerIp_a.split(".");
				form.radiusIPAddr1_an.value = radiusIPArray[0];
				form.radiusIPAddr2_an.value = radiusIPArray[1];
				form.radiusIPAddr3_an.value = radiusIPArray[2];
				form.radiusIPAddr4_an.value = radiusIPArray[3];
			}
			form.textWpaeRadiusPort_an.value = get_radiusPort_a;
		}		
	}
	if( mode == '1')
		document.getElementById("wep_54").style.display="";
	else
		document.getElementById("wep_54").style.display="none";
	if( mode_an == '1')
		document.getElementById("wep_an_54").style.display="";
	else
		document.getElementById("wep_an_54").style.display="none";
}

function KeyDown(e)
{
	var currKey=0, e=e||window.event;
	currKey= e.keyCode||e.which||e.charCode;

	if((e.altKey)&&(e.keyCode==53))
	{
		document.forms[0].opmode.value = 2;
	}
	else if((e.altKey)&&(e.keyCode==52))
	{
		document.forms[0].opmode.value = 3;
	}
	else if((e.altKey)&&(e.keyCode==48))
	{
		document.forms[0].Apply.selected=true;
		if(check_wlan())
			document.forms[0].submit();
	}
}
</script>
</BODY>
</HTML>
